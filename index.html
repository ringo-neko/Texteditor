<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <p>ファイル名</p>
    <input id="t" style="width: 98vw;"></input>
    <p>ファイルの中身</p>
    <textarea id="t" style="width: 98vw; height: 30vh;"></textarea>
    <input type="file" id="f">
    <br>
    <button onclick="downloadAsFile(document.getElementById('t').value, document.getElementById('fn').value)">ダウンロード</button>
    <script>
const fileinput = document.getElementById('f');
fileinput.addEventListener('change', (event) => {
  const file = event.target.files[0]; // 選択されたファイルオブジェクトを取得
  const reader = new FileReader(); // FileReaderオブジェクトをインスタンス化
  reader.onload = (e) => {
    const fileContent = e.target.result; // ファイルの中身
    document.getElementById("t").value=fileContent
  };
  reader.readAsText(file); // ファイルをテキストとして読み込む
});
// https://zenn.dev/snake12379/articles/8c4491dc13caa3
function downloadAsFile(text, filename) {
  const blob = new Blob([text], { type: "text/plain"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}
    </script>
  </body>
</html>
